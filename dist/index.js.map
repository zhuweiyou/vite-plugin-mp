{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { Plugin, mergeConfig } from 'vite'\nimport { resolve } from 'path'\nimport glob from 'glob'\n\nconst r = (p: string) => resolve(process.cwd(), p)\n\nexport function ViteMpPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-mp',\n    config: userConfig =>\n      mergeConfig(\n        {\n          root: 'src',\n          resolve: {\n            alias: {\n              '@': r('src'),\n              src: r('src'),\n            },\n          },\n          publicDir: r('public'),\n          build: {\n            emptyOutDir: true,\n            outDir: r('dist'),\n            rollupOptions: {\n              input: glob.sync('src/**/*.html').reduce(\n                (obj, file) => ({\n                  ...obj,\n                  [file\n                    .split('/')\n                    .slice(1)\n                    .join('.')\n                    .replace(/(\\.index)?\\.html$/, '')]: file,\n                }),\n                {}\n              ),\n            },\n          },\n        },\n        userConfig\n      ),\n  }\n}\n\nexport default ViteMpPlugin\n"],"mappings":"o4BAAA,2EAAoC,gBACpC,EAAwB,gBACxB,EAAiB,mBAEX,EAAI,AAAC,GAAc,cAAQ,QAAQ,IAAI,EAAG,CAAC,EAE1C,YAAgC,CACrC,MAAO,CACL,KAAM,iBACN,OAAQ,GACN,kBACE,CACE,KAAM,MACN,QAAS,CACP,MAAO,CACL,IAAK,EAAE,KAAK,EACZ,IAAK,EAAE,KAAK,CACd,CACF,EACA,UAAW,EAAE,QAAQ,EACrB,MAAO,CACL,YAAa,GACb,OAAQ,EAAE,MAAM,EAChB,cAAe,CACb,MAAO,UAAK,KAAK,eAAe,EAAE,OAChC,CAAC,EAAK,IAAU,OACX,GADW,EAEb,EACE,MAAM,GAAG,EACT,MAAM,CAAC,EACP,KAAK,GAAG,EACR,QAAQ,oBAAqB,EAAE,GAAI,CACxC,GACA,CAAC,CACH,CACF,CACF,CACF,EACA,CACF,CACJ,CACF,CAEA,GAAO,GAAQ","names":[]}